/*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program; if not, you can access it online at
* http://www.gnu.org/licenses/gpl-2.0.html.
*/

&i2c1 {
	status = "okay";
	//TouchScreen Gt9xx 8 inch & 10 inch
	gt9xx_1: gt9xx_1@14 {
                compatible = "goodix,gt9xx";
                reg = <0x14>;
                touch-gpio = <&gpio4 29 IRQ_TYPE_LEVEL_LOW>;
                reset-gpio = <&gpio4 26 GPIO_ACTIVE_HIGH>;
                max-x = <800>;
                max-y = <1280>;
                tp-size = <101>;   // <911> for 8 inch // <101> for 10 inch
        	status = "disable";
	};
};

&i2c2 {
	status = "okay";
	//TouchScreen Gt9xx 8 inch & 10 inch
        gt9xx: gt9xx@14 {
                compatible = "goodix,gt9xx";
                reg = <0x14>;
                touch-gpio = <&gpio4 24 IRQ_TYPE_LEVEL_LOW>;
                reset-gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
                max-x = <800>;
                max-y = <1280>;
                tp-size = <911>;   // <911> for 8 inch // <101> for 10 inch
                status = "okay";
        };
};

&dsi {
        status = "okay";
        panel@1 {
                compatible = "simple-panel-dsi";
                reg = <0>;
                backlight = <&pwm_bl>;
                enable-gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>;
                reset-gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
//              enable-gpios = <&gpio4 30 GPIO_ACTIVE_HIGH>;
//              reset-gpios = <&gpio0 8 GPIO_ACTIVE_LOW>;

                reset-delay-ms = <5>;
                init-delay-ms = <200>;
                prepare-delay-ms = <15>;


                dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST | MIPI_DSI_MODE_LPM)>;
                dsi,format = <MIPI_DSI_FMT_RGB888>;
                bus-format = <0x100a>;
                dsi,lanes = <4>;

                panel-init-sequence = [
                        //Page0
                        15 00 02 E0 00
                        //--- PASSWORD  ----//
                        15 00 02 E1 93
                        15 00 02 E2 65
                        15 00 02 E3 F8

                        //Page0
                        15 00 02 E0 00
                        //--- Sequence Ctrl  ----//
                        15 00 02 70 10
                        15 00 02 71 13
                        15 00 02 72 06
                        15 00 02 80 03

                        //--- Page4  ----//
                        15 00 02 E0 04
                        15 00 02 2D 03

                        //--- Page1  ----//
                        15 00 02 E0 01

                        //Set VCOM
                        15 00 02 00 00
                        15 00 02 01 A0
                        //Set VCOM_Reverse
                        15 00 02 03 00
                        15 00 02 04 A0

                        //Set Gamma Power, VGMP,VGMN,VGSP,VGSN
                        15 00 02 17 00
                        15 00 02 18 B1
                        15 00 02 19 01
                        15 00 02 1A 00
                        15 00 02 1B B1
                        15 00 02 1C 01

                        //Set Gate Power
                        15 00 02 1F 3E
                        15 00 02 20 2D
                        15 00 02 21 2D
                        15 00 02 22 2E

                        //SETPANEL
                        15 00 02 37 19

                        //SET RGBCYC
                        15 00 02 38 05
                        15 00 02 39 08
                        15 00 02 3A 12
                        15 00 02 3C 78
                        15 00 02 3E 80
                        15 00 02 3F 80

                        //Set TCON
                        15 00 02 40 06
                        15 00 02 41 A0

                        //--- power voltage  ----//
                        15 00 02 55 01
                        15 00 02 56 01
                        15 00 02 57 69
                        15 00 02 58 0A
                        15 00 02 59 0A
                        15 00 02 5A 28
                        15 00 02 5B 19

                        //--- Gamma  ----//
                        15 00 02 5D 7C
                        15 00 02 5E 65
                        15 00 02 5F 53
                        15 00 02 60 48
                        15 00 02 61 43
                        15 00 02 62 35
                        15 00 02 63 39
                        15 00 02 64 23
                        15 00 02 65 3D
                        15 00 02 66 3C
                        15 00 02 67 3D
                        15 00 02 68 5A
                        15 00 02 69 46
                        15 00 02 6A 57
                        15 00 02 6B 4B
                        15 00 02 6C 49
                        15 00 02 6D 2F
                        15 00 02 6E 03
                        15 00 02 6F 00
                        15 00 02 70 7C
                        15 00 02 71 65
                        15 00 02 72 53
                        15 00 02 73 48
                        15 00 02 74 43
                        15 00 02 75 35
                        15 00 02 76 39
                        15 00 02 77 23
                        15 00 02 78 3D
                        15 00 02 79 3C
                        15 00 02 7A 3D
                        15 00 02 7B 5A
                        15 00 02 7C 46
                        15 00 02 7D 57
                        15 00 02 7E 4B
                        15 00 02 7F 49
                        15 00 02 80 2F
                        15 00 02 81 03
                        15 00 02 82 00

                        //Page2, for GIP
                        15 00 02 E0 02

                        //GIP_L Pin mapping
                        15 00 02 00 47
                        15 00 02 01 47
                        15 00 02 02 45
                        15 00 02 03 45
                        15 00 02 04 4B
                        15 00 02 05 4B
                        15 00 02 06 49
                        15 00 02 07 49
                        15 00 02 08 41
                        15 00 02 09 1F
                        15 00 02 0A 1F
                        15 00 02 0B 1F
                        15 00 02 0C 1F
                        15 00 02 0D 1F
                        15 00 02 0E 1F
                        15 00 02 0F 43
                        15 00 02 10 1F
                        15 00 02 11 1F
                        15 00 02 12 1F
                        15 00 02 13 1F
                        15 00 02 14 1F
                        15 00 02 15 1F

                        //GIP_R Pin mapping
                        15 00 02 16 46
                        15 00 02 17 46
                        15 00 02 18 44
                        15 00 02 19 44
                        15 00 02 1A 4A
                        15 00 02 1B 4A
                        15 00 02 1C 48
                        15 00 02 1D 48
                        15 00 02 1E 40
                        15 00 02 1F 1F
                        15 00 02 20 1F
                        15 00 02 21 1F
                        15 00 02 22 1F
                        15 00 02 23 1F
                        15 00 02 24 1F
                        15 00 02 25 42
                        15 00 02 26 1F
                        15 00 02 27 1F
                        15 00 02 28 1F
                        15 00 02 29 1F
                        15 00 02 2A 1F
                        15 00 02 2B 1F

                        //GIP_L_GS Pin mapping
                        15 00 02 2C 11
                        15 00 02 2D 0F
                        15 00 02 2E 0D
                        15 00 02 2F 0B
                        15 00 02 30 09
                        15 00 02 31 07
                        15 00 02 32 05
                        15 00 02 33 18
                        15 00 02 34 17
                        15 00 02 35 1F
                        15 00 02 36 01
                        15 00 02 37 1F
                        15 00 02 38 1F
                        15 00 02 39 1F
                        15 00 02 3A 1F
                        15 00 02 3B 1F
                        15 00 02 3C 1F
                        15 00 02 3D 1F
                        15 00 02 3E 1F
                        15 00 02 3F 13
                        15 00 02 40 1F
                        15 00 02 41 1F

                        //GIP_R_GS Pin mapping
                        15 00 02 42 10
                        15 00 02 43 0E
                        15 00 02 44 0C
                        15 00 02 45 0A
                        15 00 02 46 08
                        15 00 02 47 06
                        15 00 02 48 04
                        15 00 02 49 18
                        15 00 02 4A 17
                        15 00 02 4B 1F
                        15 00 02 4C 00
                        15 00 02 4D 1F
                        15 00 02 4E 1F
                        15 00 02 4F 1F
                        15 00 02 50 1F
                        15 00 02 51 1F
                        15 00 02 52 1F
                        15 00 02 53 1F
                        15 00 02 54 1F
                        15 00 02 55 12
                        15 00 02 56 1F
                        15 00 02 57 1F

                        //GIP Timing
                        15 00 02 58 40
                        15 00 02 59 00
                        15 00 02 5A 00
                        15 00 02 5B 30
                        15 00 02 5C 03
                        15 00 02 5D 30
                        15 00 02 5E 01
                        15 00 02 5F 02
                        15 00 02 60 00
                        15 00 02 61 01
                        15 00 02 62 02
                        15 00 02 63 03
                        15 00 02 64 6B
                        15 00 02 65 00
                        15 00 02 66 00
                        15 00 02 67 73
                        15 00 02 68 05
                        15 00 02 69 06
                        15 00 02 6A 6B
                        15 00 02 6B 08
                        15 00 02 6C 00
                        15 00 02 6D 04
                        15 00 02 6E 04
                        15 00 02 6F 88
                        15 00 02 70 00
                        15 00 02 71 00
                        15 00 02 72 06
                        15 00 02 73 7B
                        15 00 02 74 00
                        15 00 02 75 07
                        15 00 02 76 00
                        15 00 02 77 5D
                        15 00 02 78 17
                        15 00 02 79 1F
                        15 00 02 7A 00
                        15 00 02 7B 00
                        15 00 02 7C 00
                        15 00 02 7D 03
                        15 00 02 7E 7B

                        //Page1
                        15 00 02 E0 01
                        15 00 02 0E 01 //LEDON output VCSW2

                        //Page3
                        15 00 02 E0 03
                        15 00 02 98 2F //From 2E to 2F, LED_VOL

                        //Page4
                        15 00 02 E0 04
                        15 00 02 09 10
                        15 00 02 2B 2B
                        15 00 02 2E 44

                        //Page0
                        15 00 02 E0 00
                        15 00 02 E6 02
                        15 00 02 E7 02

                        //SLP OUT
                        05 78 01 11
                        //DISP ON
                        05 05 01 29
                        //--- TE----//
                        15 00 02 35 00
                ];

                panel-exit-sequence = [
                        05 05 01 28
                        05 78 01 10
                ];
                display-timings {
                        native-mode = <&timing1>;

                        timing1: timing1 {
                                clock-frequency = <68430000>;
                                screen-type = <7>;
                                out-face    = <0>;
                                hactive = <800>;
                                vactive = <1280>;
                                hback-porch = <48>;
                                hfront-porch = <32>;
                                vback-porch = <4>;
                                vfront-porch = <12>;
                                hsync-len = <16>;
                                vsync-len = <4>;
                                hsync-active = <0>;
                                vsync-active = <0>;
                                de-active = <0>;
                                pixelclk-active = <0>;
                                swap-rb = <0>;
                                swap-rg = <0>;
                                swap-gb = <0>;
                        };
                };
        };
};

&dsi1 {
        status = "disable";
//      rockchip,dual-channel = <&dsi>;
        panel@1 {
                compatible = "simple-panel-dsi";
                reg = <0>;
                backlight = <&pwm_bl>;

                enable-gpios = <&gpio4 30 GPIO_ACTIVE_HIGH>;
                reset-gpios = <&gpio0 8 GPIO_ACTIVE_LOW>;

                reset-delay-ms = <5>;
                init-delay-ms = <200>;
                prepare-delay-ms = <15>;


                dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST | MIPI_DSI_MODE_LPM)>;
                dsi,format = <MIPI_DSI_FMT_RGB888>;
                bus-format = <0x100a>;
                dsi,lanes = <4>;

                panel-init-sequence = [
                        39 00 06 f0 55 aa 52 08 00
                        39 00 03 b1 68 01
                        15 00 02 b6 08
                        39 00 04 b8 01 02 08
                        39 00 03 bb 44 44
                        39 00 03 bc 00 00
                        39 00 06 bd 02 68 10 10 00
                        15 00 02 c8 80
                        39 00 06 f0 55 aa 52 08 01
                        39 00 03 b3 4f 4f
                        39 00 03 b4 10 10
                        39 00 03 b5 05 05
                        39 00 03 b9 35 35
                        39 00 04 ba ba 25 25
                        39 00 03 bc 68 00
                        39 00 03 bd 68 00
                        15 00 02 be 30
                        15 00 02 c0 0c
                        15 00 02 ca 00
                        39 00 06 f0 55 aa 52 08 02
                        15 00 02 ee 01
                        39 00 11 b0 00 00 00 0f 00 2a 00 40 00 54 00 76 00 93 00 c5
                        39 00 11 b1 00 f0 01 32 01 66 01 bb 01 ff 02 01 02 42 02 85
                        39 00 11 b2 02 af 02 e0 03 05 03 35 03 54 03 84 03 a0 03 c4
                        39 00 05 b3 03 f2 03 ff
                        39 00 06 f0 55 aa 52 08 03
                        39 00 03 b0 00 00
                        39 00 03 b1 00 00
                        39 00 06 b2 08 00 17 00 00
                        39 00 06 b6 05 00 00 00 00
                        39 00 06 ba 53 00 a0 00 00
                        39 00 06 bb 53 00 a0 00 00
                        39 00 05 c0 00 00 00 00
                        39 00 05 c1 00 00 00 00
                        15 00 02 c4 60
                        15 00 02 c5 c0
                        39 00 06 f0 55 aa 52 08 05
                        39 00 03 b0 17 06
                        39 00 03 b1 17 06
                        39 00 03 b2 17 06
                        39 00 03 b3 17 06
                        39 00 03 b4 17 06
                        39 00 03 b5 17 06
                        15 00 02 b8 0c
                        15 00 02 b9 00
                        15 00 02 ba 00
                        15 00 02 bb 0a
                        15 00 02 bc 02
                        39 00 06 bd 03 01 01 03 03
                        15 00 02 c0 07
                        15 00 02 c4 a2
                        39 00 03 c8 03 20
                        39 00 03 c9 01 21
                        39 00 04 cc 00 00 01
                        39 00 04 cd 00 00 01
                        39 00 06 d1 00 04 fc 07 14
                        39 00 06 d2 10 05 00 03 16
                        15 00 02 e5 06
                        15 00 02 e6 06
                        15 00 02 e7 06
                        15 00 02 e8 06
                        15 00 02 e9 06
                        15 00 02 ea 06
                        15 00 02 ed 30
                        39 00 06 f0 55 aa 52 08 06
                        39 00 03 b0 17 11
                        39 00 03 b1 16 10
                        39 00 03 b2 12 18
                        39 00 03 b3 13 19
                        39 00 03 b4 00 31
                        39 00 03 b5 31 34
                        39 00 03 b6 34 29
                        39 00 03 b7 2a 33 
                        39 00 03 b8 2e 2d
                        39 00 03 b9 08 34
                        39 00 03 ba 34 08
                        39 00 03 bb 2d 2e
                        39 00 03 bc 34 2a
                        39 00 03 bd 29 34
                        39 00 03 be 13 03
                        39 00 03 bf 31 00
                        39 00 03 c0 19 13
                        39 00 03 c1 18 12
                        39 00 03 c2 10 16
                        39 00 03 c3 11 17
                        39 00 03 e5 34 34
                        39 00 03 c4 12 18
                        39 00 03 c5 13 19
                        39 00 03 c6 17 11
                        39 00 03 c7 16 10
                        39 00 03 c8 08 31
                        39 00 03 c9 31 34
                        39 00 03 ca 34 29
                        39 00 03 cb 2a 33
                        39 00 03 cc 2d 2e
                        39 00 03 cd 00 34
                        39 00 03 ce 34 00
                        39 00 03 cf 2e 2d
                        39 00 03 d0 34 2a
                        39 00 03 d1 29 2a
                        39 00 03 d2 34 31
                        39 00 03 d3 31 08
                        39 00 03 d4 10 16
                        39 00 03 d5 11 17
                        39 00 03 d6 19 13
                        39 00 03 d7 18 12
                        39 00 03 e6 34 34
                        39 00 06 d8 00 00 00 00 00
                        39 00 06 d9 00 00 00 00 00
                        15 00 02 e7 00
                        05 78 01 11
                        05 14 01 29
                        15 00 02 35 00
                        39 14 06 f0 55 aa 52 08 01
                ];

                panel-exit-sequence = [
                        05 00 01 28
                        05 78 01 10
                ];
                display-timings {
                        native-mode = <&timing0>;

                        timing0: timing0 {
                                clock-frequency = <66000000>;
                                screen-type = <7>;
                                out-face    = <0>;
                                hactive = <800>;
                                vactive = <1280>;
                                hback-porch = <59>;
                                hfront-porch = <16>;
                                vback-porch = <3>;
                                vfront-porch = <8>;
                                hsync-len = <5>;
                                vsync-len = <5>;
                                hsync-active = <0>;
                                vsync-active = <0>;
                                de-active = <0>;
                                pixelclk-active = <0>;
                                swap-rb = <0>;
                                swap-rg = <0>;
                                swap-gb = <0>;
                        };
                };
        };
};

